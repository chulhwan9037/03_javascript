<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>promise</title>
</head>
<body>
	<!--  
		fetch() : 메서드로 네트워크의 리소스를 쉽게 비동기적으로 취득할 수도 있습니다.
				  요청과 응답 등의 요소를 JavaScript에서 접근하고 조작할 수 있는 인터페이스를 제공합니다.
				  ** 서버로부터 자원을 받아서 반환한다. => response 
	-->
	<script type="text/javascript">
		/* 
		const myPromise = fetch('https://jsonplaceholder.typicode.com/todos?_limit=5');
		
		myPromise
		.then((response)=>{
			console.log('response : ', response);
		})
		.catch((err)=>{
			console.log('err : ', err);  // 400번대 오류 클라이언트, 500번대 오류 서버
		})
		 */
		 
		fetch('https://jsonplaceholder.typicode.com/todos?_limit=5')
		.then((response)=>{
			//console.log('response : ', response)
			// 성공해서 가져온 response이 json 이므로 return response.json(); 처리하면 
			// json 형식의 데이터도 처리할 수 있다. 
			return response.json();
		})	
		.then((data)=>{
			// 첫번째 then에서 return한 정보를 받아서 처리할 수 있다. 
			// data란 위에서 넘어온 response.json();를 뜻한다. 
			console.log('data : ', data);
			// 넘어온 배열을 하나씩 검사해서 조건에 맞는 데이터만 남는다.
			return data.filter(obj => obj.id>3);
		})
		/* .then(result=>console.log('result', result)) 한줄로*/
		.then((result)=>{
			// 위 than(data) 에서 리턴한 id>3 인 데이터 => result
			console.log('result : ', result)
		})
		.catch(err=> console.log('err : ', err))
		.finally(()=> console.log('finally!!!'))
	</script>
	
</body>
</html>




















